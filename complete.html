<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Luna Key</title>
<style>
body {
  background: #0b0e18;
  color: white;
  font-family: system-ui;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}
.card {
  background: #141a2e;
  padding: 40px;
  border-radius: 16px;
  width: 420px;
  text-align: center;
}
.key {
  margin-top: 20px;
  padding: 14px;
  background: #0b0e18;
  border-radius: 8px;
  word-break: break-all;
}
</style>
</head>
<body>

<div class="card">
  <h2>Your License Key</h2>
  <p>Copy and paste into Luna Executor</p>
  <div class="key" id="key">Generating...</div>
</div>

<script>
fetch('/api/issue')
  .then(r => r.json())
  .then(d => {
    if (d.key) {
      document.getElementById('key').innerText = d.key;
    } else {
      document.getElementById('key').innerText = d.error;
    }
  })
  .catch(() => {
    document.getElementById('key').innerText = 'Server error';
  });
</script>

</body>
</html>
